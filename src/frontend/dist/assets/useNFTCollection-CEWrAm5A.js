import{r as n,u as S,A as w}from"./index-5sOdJcVt.js";import{i as B}from"./index-CQEhYxiE.js";function T(c){const t=e=>{if(e)return"Text"in e?e.Text:"Nat"in e?BigInt(e.Nat):"Bool"in e?e.Bool:e},r={raw:c};for(const[e,a]of c)e==="icrc7:symbol"&&(r.symbol=t(a)),e==="icrc7:name"&&(r.name=t(a)),e==="icrc7:description"&&(r.description=t(a)),e==="icrc7:logo"&&(r.logo=t(a)),e==="icrc7:total_supply"&&(r.totalSupply=t(a)),e==="icrc7:supply_cap"&&(r.supplyCap=t(a)),e==="icrc7:max_query_batch_size"&&(r.maxQueryBatchSize=t(a)),e==="icrc7:max_update_batch_size"&&(r.maxUpdateBatchSize=t(a)),e==="icrc7:max_memo_size"&&(r.maxMemoSize=t(a)),e==="icrc7:max_take_value"&&(r.maxTakeValue=t(a)),e==="icrc7:default_take_value"&&(r.defaultTakeValue=t(a)),e==="icrc7:atomic_batch_transfers"&&(r.atomicBatchTransfers=t(a)),e==="icrc7:tx_window"&&(r.txWindow=t(a)),e==="icrc7:permitted_drift"&&(r.permittedDrift=t(a));return r}function I(c,t){console.debug("useNFTCollection",c,t);const[r,e]=n.useState(null),[a,p]=n.useState([]),[h,u]=n.useState(!0),[x,f]=n.useState(null),m=S();return n.useEffect(()=>{let l=!1;const d=w.createActor(B,{agent:m,canisterId:c});async function y(){u(!0),f(null);try{const o=await d.icrc7_collection_metadata(),b=T(o);l||e(b);let s,i=[],_=50,g=[];for(;i=(await d.icrc7_tokens(s!==void 0?[s]:[],[BigInt(_)])||[]).map(k=>BigInt(k)),!(i.length===0||(g.push(...i),i.length<_));)s=i[i.length-1];l||p(g)}catch(o){l||f(o)}finally{l||u(!1)}}return y(),()=>{l=!0}},[c,t==null?void 0:t.override,t==null?void 0:t.queryArgs,m]),{collection:r,tokenIds:a,loading:h,error:x}}export{I as u};
